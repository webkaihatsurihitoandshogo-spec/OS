<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>SwiftUI OS Simulation</title>
    <style>
        :root {
            /* SwiftUIã®.ultraThinMaterialã‚’å†ç¾ã™ã‚‹å¤‰æ•° */
            --glass-bg: rgba(255, 255, 255, 0.2);
            --glass-blur: blur(25px);
            --border-white: rgba(255, 255, 255, 0.3);
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: black; /* èµ·å‹•æ™‚ã¯é»’ */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            transition: background 1.5s ease-in-out;
        }

        /* --- èµ·å‹•ç”»é¢ï¼ˆStartupscreen.swiftï¼‰ --- */
        #startup-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            transition: opacity 1s ease-out;
            z-index: 10;
        }

        .apple-logo {
            font-size: 80px;
            color: white;
            opacity: 0;
            transition: opacity 1.5s ease-in;
        }

        .progress-bar {
            width: 200px;
            height: 6px;
            background: rgba(128, 128, 128, 0.5);
            border-radius: 100px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            width: 0%;
            height: 100%;
            background: white;
            transition: width 3s linear;
        }

        /* --- ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆThefoundationofthetoolbar.swiftï¼‰ --- */
        #desktop-environment {
            position: fixed;
            inset: 0;
            display: none; /* æœ€åˆã¯éè¡¨ç¤º */
            background: linear-gradient(135deg, #1e3a8a, #581c87); /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å£ç´™ */
            justify-content: center;
            align-items: flex-end;
            padding-bottom: 20px;
            opacity: 0;
            transition: opacity 1s ease-in;
        }

        .toolbar-view {
            /* .ultraThinMaterial ã®å†ç¾ */
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            
            /* padding / spacing: 15 / RoundedRectangle */
            padding: 10px 20px;
            display: flex;
            gap: 15px;
            border-radius: 20px;
            
            /* .stroke(Color.white.opacity(0.3), lineWidth: 0.5) */
            border: 0.5px solid var(--border-white);
            
            /* .shadow */
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .icon {
            width: 40px;
            height: 40px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            
            /* .scaleEffect(1.0) & .withAnimation(.spring()) */
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), background 0.2s;
        }

        /* .onHover { ... scaleEffect(1.2) } */
        .icon:hover {
            transform: scale(1.2);
            background: rgba(255, 255, 255, 0.3);
        }

        .icon:active {
            transform: scale(0.9);
        }

        /* ãƒ¡ãƒ¢ãƒªãƒ¢ãƒ‹ã‚¿ãƒ¼ï¼ˆ2.5GBåˆ¶é™ç”¨ï¼‰ */
        #mem-info {
            position: fixed;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 12px;
            background: rgba(0,0,0,0.3);
            padding: 5px 15px;
            border-radius: 20px;
            display: none;
        }
    </style>
</head>
<body>

    <!-- 1. èµ·å‹•ç”»é¢ -->
    <div id="startup-container">
        <div id="logo" class="apple-logo">ï£¿</div>
        <div class="progress-bar">
            <div id="bar" class="progress-fill"></div>
        </div>
    </div>

    <!-- 2. ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã¨ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— -->
    <div id="desktop-environment">
        <div id="mem-info">Memory Usage: <span id="mem-val">0</span> / 2500MB</div>
        <div class="toolbar-view">
            <!-- icons ãƒªã‚¹ãƒˆã®å†ç¾ï¼ˆçµµæ–‡å­—ã§ä»£ç”¨ã€å¿…è¦ã«å¿œã˜ã¦ç”»åƒã¸ï¼‰ -->
            <div class="icon" onclick="launch('Finder')">ğŸ—‚ï¸</div>
            <div class="icon" onclick="launch('Terminal')">ğŸš</div>
            <div class="icon" onclick="launch('Safari')">ğŸŒ</div>
            <div class="icon" onclick="launch('Settings')">âš™ï¸</div>
            <div class="icon" onclick="launch('Folder')">ğŸ“</div>
        </div>
    </div>

     <script>
        window.onload = function() {
            const logo = document.getElementById('logo');
            const bar = document.getElementById('bar');
            const startup = document.getElementById('startup-container');
            const desktop = document.getElementById('desktop-environment');
            const memInfo = document.getElementById('mem-info');

            console.log("OSèµ·å‹•ã‚·ãƒ¼ã‚±ãƒ³ã‚¹é–‹å§‹...");

            // 1. ãƒ­ã‚´ã¨ãƒãƒ¼ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹
            setTimeout(() => {
                logo.style.opacity = '1';
                bar.style.width = '100%';
            }, 100);

            // 2. ãƒãƒ¼ã®ç§»å‹•æ™‚é–“ï¼ˆ3000msï¼‰ï¼‹ä½™è£•ã‚’æŒã£ã¦ 3500ms å¾Œã«åˆ‡ã‚Šæ›¿ãˆã‚’å®Ÿè¡Œ
            setTimeout(() => {
                console.log("ãƒ­ãƒ¼ãƒ‰å®Œäº†ã€‚ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¸ç§»è¡Œã—ã¾ã™ã€‚");
                
                // èµ·å‹•ç”»é¢ã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
                startup.style.opacity = '0';
                
                // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã®å®Œäº†ï¼ˆ1ç§’ï¼‰ã‚’å¾…ã£ã¦ã‹ã‚‰è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ
                setTimeout(() => {
                    startup.style.display = 'none';
                    
                    // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚’è¡¨ç¤º
                    desktop.style.display = 'flex';
                    memInfo.style.display = 'block';
                    
                    // ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’ãµã‚ã£ã¨å‡ºã™
                    setTimeout(() => {
                        desktop.style.opacity = '1';
                    }, 50);
                    
                    updateMemory(120); // åˆæœŸãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’è¡¨ç¤º
                }, 1000);
            }, 3500); 
        };

        // ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã®é–¢æ•°
        function launch(app) {
            console.log(`${app} ã‚’èµ·å‹•ã—ã¾ã—ãŸ`);
            updateMemory(50);
        }

        // ãƒ¡ãƒ¢ãƒªç®¡ç†é–¢æ•°
        function updateMemory(add) {
            const val = document.getElementById('mem-val');
            let current = parseFloat(val.innerText) || 0;
            current += add;
            val.innerText = current;
            if(current > 2500) {
                alert("2.5GBåˆ¶é™ã‚’è¶…ãˆã¾ã—ãŸã€‚ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ã—ã¾ã™ã€‚");
                location.reload();
            }
        }
    </script>

</body>
</html>
